{
  "name": "worktrunk-tools-basic",
  "description": "Test basic WorkTrunk tools (list, switch, status, create)",
  "dataset": {
    "name": "tools-basic",
    "examples": [
      {
        "id": "list-worktrees",
        "inputs": {
          "query": "List all WorkTrunk worktrees using the worktrunk-list tool"
        }
      },
      {
        "id": "get-status",
        "inputs": {
          "query": "Get the current WorkTrunk status for this branch using worktrunk-status"
        }
      },
      {
        "id": "create-worktree",
        "inputs": {
          "query": "Create a new WorkTrunk worktree for branch 'feature/test' using worktrunk-create"
        }
      },
      {
        "id": "switch-worktree",
        "inputs": {
          "query": "Switch to the 'main' branch using worktrunk-switch"
        }
      }
    ]
  },
  "variants": {
    "with-plugin": {
      "plugins": ["opencode-worktrunk"]
    }
  },
  "setup": {
    "template": "empty",
    "vcs": {
      "git": {
        "defaultBranch": "main",
        "commits": [
          {
            "message": "Initial commit",
            "files": {
              "README.md": "# Test Project"
            }
          }
        ]
      }
    }
  },
  "evaluators": [
    {
      "type": "code",
      "assertions": [
        {
          "type": "tool_called",
          "tool": "worktrunk-list"
        },
        {
          "type": "tool_called",
          "tool": "worktrunk-status"
        },
        {
          "type": "tool_called",
          "tool": "worktrunk-create"
        },
        {
          "type": "environment_state",
          "check": "worktree_exists",
          "branch": "feature/test",
          "description": "Worktree for feature/test branch actually exists after creation"
        },
        {
          "type": "tool_called",
          "tool": "worktrunk-switch"
        },
        {
          "type": "environment_state",
          "check": "current_branch",
          "branch": "main",
          "description": "Actually switched to main branch"
        }
      ]
    },
    {
      "type": "llm-judge",
      "criteria": [
        "Each tool executes successfully and produces the expected outcome",
        "Worktrees are actually created in the environment (not just tool called)",
        "Branch switches actually change the working directory",
        "Tool outputs are informative and useful",
        "Tools handle errors gracefully"
      ],
      "reference_free": true
    }
  ],
  "error_handling": {
    "on_error": "continue",
    "timeout_ms": 120000
  }
}

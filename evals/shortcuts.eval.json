{
  "name": "worktrunk-shortcuts",
  "description": "Test shortcuts support (@ for current branch, - for previous worktree)",
  "dataset": {
    "name": "shortcuts",
    "examples": [
      {
        "id": "switch-current",
        "inputs": {
          "query": "Switch to the current branch using '@' shortcut with worktrunk-switch"
        }
      },
      {
        "id": "switch-previous",
        "inputs": {
          "query": "Switch to the previous worktree using '-' shortcut"
        }
      },
      {
        "id": "remove-current",
        "inputs": {
          "query": "Remove the current worktree using '@' shortcut with worktrunk-remove"
        }
      }
    ]
  },
  "variants": {
    "with-plugin": {
      "plugins": ["opencode-worktrunk"]
    }
  },
  "setup": {
    "template": "empty",
    "vcs": {
      "git": {
        "defaultBranch": "main",
        "commits": [
          {
            "message": "Initial commit",
            "files": {
              "README.md": "# Test Project"
            }
          }
        ],
        "branches": ["feature/test", "bugfix/issue-1"]
      }
    }
  },
  "evaluators": [
    {
      "type": "code",
      "assertions": [
        {
          "type": "tool_called",
          "tool": "worktrunk-switch"
        },
        {
          "type": "environment_state",
          "check": "shortcut_resolves",
          "shortcut": "@",
          "description": "Shortcut '@' actually resolves to current branch"
        },
        {
          "type": "tool_called",
          "tool": "worktrunk-remove"
        },
        {
          "type": "environment_state",
          "check": "shortcut_works",
          "shortcut": "@",
          "operation": "remove",
          "description": "Shortcut '@' actually works for remove operation"
        }
      ]
    },
    {
      "type": "llm-judge",
      "criteria": [
        "Shortcuts (@ and -) are actually recognized and produce expected outcomes (verified, not just tool called)",
        "Shortcuts work correctly with switch, create, and remove operations",
        "Shortcuts provide convenient alternatives to explicit branch names",
        "Shortcut resolution matches the actual current branch state"
      ],
      "reference_free": true
    }
  ],
  "error_handling": {
    "on_error": "continue",
    "timeout_ms": 120000
  }
}

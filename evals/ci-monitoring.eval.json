{
  "name": "worktrunk-ci-monitoring",
  "description": "Test CI monitoring support (--full --branches to show PR/CI status)",
  "dataset": {
    "name": "ci-monitoring",
    "examples": [
      {
        "id": "list-full-branches",
        "inputs": {
          "query": "List all branches with full CI status using worktrunk-list with --full --branches flags"
        }
      },
      {
        "id": "monitor-ci",
        "inputs": {
          "query": "Show CI status across all branches including those without worktrees"
        }
      }
    ]
  },
  "variants": {
    "with-plugin": {
      "plugins": ["opencode-worktrunk"]
    }
  },
  "setup": {
    "template": "empty",
    "vcs": {
      "git": {
        "defaultBranch": "main",
        "commits": [
          {
            "message": "Initial commit",
            "files": {
              "README.md": "# Test Project"
            }
          }
        ],
        "branches": ["feature/test", "bugfix/issue-1", "feature/without-worktree"],
        "remote": {
          "name": "origin",
          "branches": ["main"]
        }
      }
    }
  },
  "evaluators": [
    {
      "type": "code",
      "assertions": [
        {
          "type": "tool_called",
          "tool": "worktrunk-list",
          "args_contain": "full"
        },
        {
          "type": "tool_called",
          "tool": "worktrunk-list",
          "args_contain": "branches"
        },
        {
          "type": "environment_state",
          "check": "output_contains_branches",
          "branches": ["main", "feature/test", "bugfix/issue-1", "feature/without-worktree"],
          "description": "Output actually contains all branches including those without worktrees"
        },
        {
          "type": "environment_state",
          "check": "output_contains_ci_status",
          "description": "Output actually contains CI status information for branches"
        }
      ]
    },
    {
      "type": "llm-judge",
      "criteria": [
        "CI monitoring output actually shows status for all branches (verified, not just tool called)",
        "Branches without worktrees are actually included in the output",
        "CI status information is present and useful for monitoring parallel work",
        "Output format enables effective CI status monitoring"
      ],
      "reference_free": true
    }
  ],
  "error_handling": {
    "on_error": "continue",
    "timeout_ms": 120000
  }
}
